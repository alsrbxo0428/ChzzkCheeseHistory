<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>치지직 스트리머 별 후원 내역</title>
    <link rel="stylesheet" href="./css/ChzzkCheeseHistory.css">
    <link rel="icon" type="image/png" href="./images/cheese_favicon.png">
</head>
<body>
    <div id="root">
        <header class="header_container">
            <div id="header">
                <h3 class="m0 mt5 mb5 ml10">치지직 스트리머 별 후원 내역</h3>
            </div>
        </header>
    
        <div id="discriptions">
            <section>
                <div class="content">
                    <div class="innerLayout">
                        <div class="wrapper">
                            <div id="guide">
                                <div class="form_wrapper">
                                    <h2 class="form_title">
                                        <em>후원 내역</em>
                                        확인하기
                                    </h2>
                                    <ol class="guide_list">
                                        <li class="guide_item">
                                            <div class="guide_order">1</div>
                                            <div class="guide_info_area">
                                                <span class="guide_text">후원 내역을 확인하고 싶은 계정으로 네이버(치지직) 사이트에 로그인 하세요.</span>
                                            </div>
                                        </li>
                                        <li class="guide_item">
                                            <div class="guide_order">2</div>
                                            <div class="guide_info_area">
                                                <span class="guide_text">가져올 후원 내역의 연도와 데이터 개수를 입력합니다.</span>
                                                <div class="guide_info">기본 2025년, 10,000개</div>
                                            </div>
                                        </li>
                                        <li class="guide_item">
                                            <div class="guide_order">3</div>
                                            <div class="guide_info_area">
                                                <span class="guide_text">후원 내역 버튼을 클릭하여 새 창으로 후원 내역 페이지를 열어줍니다.</span>
                                            </div>
                                        </li>
                                        <li class="guide_item">
                                            <div class="guide_order">4</div>
                                            <div class="guide_info_area">
                                                <span class="guide_text">후원 내역 페이지에서 컨트롤 + S를 눌러 후원 내역 JSON 파일을 저장합니다.</span>
                                                <div class="guide_info">저장 후 후원 내역 페이지는 닫아도 됩니다.</div>
                                            </div>
                                        </li>
                                        <li class="guide_item">
                                            <div class="guide_order">5</div>
                                            <div class="guide_info_area">
                                                <span class="guide_text">파일 선택 버튼을 클릭하여 저장한 파일을 등록합니다.</span>
                                                <div class="guide_info">JSON 파일은 한 번에 여러 개 등록 가능합니다.</div>
                                            </div>
                                        </li>
                                        <li class="guide_item">
                                            <div class="guide_order">6</div>
                                            <div class="guide_info_area">
                                                <span class="guide_text">생성된 스트리머 목록에서 확인하고 싶은 스트리머를 클릭합니다.</span>
                                            </div>
                                        </li>
                                        <li class="guide_item">
                                            <div class="guide_order">7</div>
                                            <div class="guide_info_area">
                                                <span class="guide_text">생성된 후원 내역을 확인하세요.</span>
                                            </div>
                                        </li>
                                    </ol>
                                </div>
                            </div>
                            
                            <div id="comment">
                                <div class="form_wrapper">
                                    <h2 class="form_title">COMMENT</h2>
                                    <ul class="guide_list">
                                        <li class="guide_item">개인적으로 각 스트리머 별 치즈 사용 내역을 확인하고 싶어서 취미로 만든 페이지입니다.</li>
                                        <li class="guide_item">해당 페이지는 치지직의 치즈 후원 내역을 연, 월, 일 별로 정리하여 볼 수 있도록 제작했습니다.</li>
                                        <li class="guide_item">
                                            <a href="https://game.naver.com/profile#cash" target="_blank" rel="noopener noreferrer"><img src="./images/favicon.png" height="80px"></a>
                                            <div class="guide_area">
                                                <h2 class="guide_text">네이버 게임 프로필</h2>
                                                <div class="guide_info">치즈 후원 내역의 상세 정보를 확인하고 싶으신 분은<br>왼쪽 이미지를 클릭하셔서 네이버 게임 프로필 페이지로 이동하시기 바랍니다.</div>
                                            </div>
                                        </li>
                                        <li class="guide_item">
                                            <a href="https://github.com/alsrbxo0428/ChzzkCheeseHistory" target="_blank" rel="noopener noreferrer"><img src="./images/github_icon.png" height="80px"></a>
                                            <div class="guide_area">
                                                <h2 class="guide_text">ChzzkCheeseHistory</h2>
                                                <div class="guide_info">해당 페이지의 소스 코드를 확인하고 싶으신 분은<br>왼쪽 이미지를 클릭하셔서 깃허브의 ChzzkCheeseHistory Repository 페이지로 이동하시기 바랍니다.</div>
                                            </div>
                                        </li>
                                        <li class="guide_item"><h1>해당 페이지의 디자인을 수정중입니다.<br>레이아웃이 이상하게 보일 수 있습니다.</h1></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <div id="history">
            <section>
                <div class="content">
                    <div class="innerLayout">
                        <div class="history">
                            <ul class="history_ul">
                                <li class="history_li">
                                    <header class="form_header">
                                        <h2 class="form_title">후원 내역</h2>
                                        <div class="form_box_header">
                                            <div class="form_box_button">
                                                <div class="selectbox_container">
                                                    <input type="hidden" id="searchYear" value="2025" />
                                                    <button type="button" class="selectbox_component" onclick="selectboxToggle();">
                                                        <span class="selectbox_inner">
                                                            0000년
                                                            <svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 10 10" fill="none" class="selectbox_icon_arrow">
                                                                <path fill="currentColor" fill-rule="evenodd" d="M.21 2.209a.715.715 0 0 1 1.01 0L5 5.983 8.78 2.21a.715.715 0 0 1 1.01 0 .712.712 0 0 1 0 1.008L5 8 .21 3.217a.712.712 0 0 1 0-1.008Z" clip-rule="evenodd"></path>
                                                            </svg>
                                                        </span>
                                                    </button>
                                                    <ul class="selectbox_layer" style="display: none;">
                                                        <li class="selectbox_item">
                                                            <button type="button" class="selectbox_option" onclick="chgSearchYear(2023);">2023년</button>
                                                        </li>
                                                        <li class="selectbox_item">
                                                            <button type="button" class="selectbox_option" onclick="chgSearchYear(2024);">2024년</button>
                                                        </li>
                                                        <li class="selectbox_item">
                                                            <button type="button" class="selectbox_option" onclick="chgSearchYear(2025);">2025년</button>
                                                        </li>
                                                    </ul>
                                                </div>
                                                <div class="search_wrap">
                                                    <div class="search_wrapper">
                                                        <div class="search_box">
                                                            <input type="text" id="size" value="10000" maxlength="5" onchange="chgUrl();" onkeyup="this.value = this.value.replace(/[^0-9]/g, '')" />
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                <div class="form_button">
                                                    <button class="button_container" onclick="openHistory();">조회</button>
                                                    <a href="https://api.chzzk.naver.com/commercial/v1/product/purchase/history?page=0&size=10000&searchYear=2025" id="apiLink" target="_blank"></a>
                                                </div>
                                                
                                                <div class="form_button">
                                                    <ul class="form_button_ul">
                                                        <li>
                                                            <button class="button_container button_container_light" onclick="addFile();">파일등록</button>
                                                            <input type="file" id="jsonFileInput" accept="application/json" onchange="readFile(event);" multiple style="display: none;" />
                                                        </li>
                                                        <li>
                                                            <p id="fileList"></p>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </header>
                                </li>
                                <li class="history_li">
                                    <div class="form_wrapper">
                                        <div id="output">
                                            <div id="totalContainer">
                                                <h2 id="totalPayAmount">전체 후원 금액 : 0원</h2>
                                                <ul id="sortUl" onchange="changeSortType();">
                                                    <li><label for="sortTotal"><input type="radio" id="sortTotal" name="sortType" value="total" checked />후원금액순</label></li>
                                                    <li><label for="sortName"><input type="radio" id="sortName" name="sortType" value="name" />닉네임순</label></li>
                                                </ul>
                                            </div>
                                            <div id="channelList">
                                                
                                            </div>
                                        </div>
                                    </div>
                                </li>
                                <li class="history_li">
                                    <div class="form_wrapper" id="channelHistoryWrap" style="display: none;">
                                    <!-- <div class="form_wrapper" id="channelHistoryWrap"> -->
                                        <div class="tab_container">
                                            <ul class="tab_list">
                                                <li class="tab_item">
                                                    <button class="tab_button on" id="graphBtn" onclick="chgView('Graph');">
                                                        <span class="tab_box">
                                                            <span class="tab_text">그래프</span>
                                                        </span>
                                                    </button>
                                                </li>
                                                <li class="tab_item">
                                                    <button class="tab_button" id="calendarBtn" onclick="chgView('Calendar');">
                                                        <span class="tab_box">
                                                            <span class="tab_text">달력</span>
                                                        </span>
                                                    </button>
                                                </li>
                                            </ul>
                                            <div class="selectbox">
                                                <div class="selectbox_container">
                                                    <button class="selectbox_component" onclick="selectboxToggle2();">
                                                        <span class="selectbox_inner">
                                                            0000년
                                                            <svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 10 10" fill="none" class="selectbox_icon_arrow">
                                                                <path fill="currentColor" fill-rule="evenodd" d="M.21 2.209a.715.715 0 0 1 1.01 0L5 5.983 8.78 2.21a.715.715 0 0 1 1.01 0 .712.712 0 0 1 0 1.008L5 8 .21 3.217a.712.712 0 0 1 0-1.008Z" clip-rule="evenodd"></path>
                                                            </svg>
                                                        </span>
                                                    </button>
                                                    <ul class="selectbox_layer" style="display: none;">
                                                        <li class="selectbox_item">
                                                            <button type="button" class="selectbox_option" onclick="chgCalendatYear(2023);">2023년</button>
                                                        </li>
                                                        <li class="selectbox_item">
                                                            <button type="button" class="selectbox_option" onclick="chgCalendatYear(2024);">2024년</button>
                                                        </li>
                                                        <li class="selectbox_item">
                                                            <button type="button" class="selectbox_option" onclick="chgCalendatYear(2025);">2025년</button>
                                                        </li>
                                                    </ul>
                                                </div>
                                                <div class="selectbox_container">
                                                    <button class="selectbox_component" onclick="selectboxToggle3();">
                                                        <span class="selectbox_inner">
                                                            0월
                                                            <svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 10 10" fill="none" class="selectbox_icon_arrow">
                                                                <path fill="currentColor" fill-rule="evenodd" d="M.21 2.209a.715.715 0 0 1 1.01 0L5 5.983 8.78 2.21a.715.715 0 0 1 1.01 0 .712.712 0 0 1 0 1.008L5 8 .21 3.217a.712.712 0 0 1 0-1.008Z" clip-rule="evenodd"></path>
                                                            </svg>
                                                        </span>
                                                    </button>
                                                    <ul class="selectbox_layer" style="display: none;">
                                                        <li class="selectbox_item">
                                                            <button type="button" class="selectbox_option" onclick="chgCalendarMonth(1);">1월</button>
                                                        </li>
                                                        <li class="selectbox_item">
                                                            <button type="button" class="selectbox_option" onclick="chgCalendarMonth(2);">2월</button>
                                                        </li>
                                                        <li class="selectbox_item">
                                                            <button type="button" class="selectbox_option" onclick="chgCalendarMonth(3);">3월</button>
                                                        </li>
                                                        <li class="selectbox_item">
                                                            <button type="button" class="selectbox_option" onclick="chgCalendarMonth(4);">4월</button>
                                                        </li>
                                                        <li class="selectbox_item">
                                                            <button type="button" class="selectbox_option" onclick="chgCalendarMonth(5);">5월</button>
                                                        </li>
                                                        <li class="selectbox_item">
                                                            <button type="button" class="selectbox_option" onclick="chgCalendarMonth(6);">6월</button>
                                                        </li>
                                                        <li class="selectbox_item">
                                                            <button type="button" class="selectbox_option" onclick="chgCalendarMonth(7);">7월</button>
                                                        </li>
                                                        <li class="selectbox_item">
                                                            <button type="button" class="selectbox_option" onclick="chgCalendarMonth(8);">8월</button>
                                                        </li>
                                                        <li class="selectbox_item">
                                                            <button type="button" class="selectbox_option" onclick="chgCalendarMonth(9);">9월</button>
                                                        </li>
                                                        <li class="selectbox_item">
                                                            <button type="button" class="selectbox_option" onclick="chgCalendarMonth(10);">10월</button>
                                                        </li>
                                                        <li class="selectbox_item">
                                                            <button type="button" class="selectbox_option" onclick="chgCalendarMonth(11);">11월</button>
                                                        </li>
                                                        <li class="selectbox_item">
                                                            <button type="button" class="selectbox_option" onclick="chgCalendarMonth(12);">12월</button>
                                                        </li>
                                                    </ul>
                                                </div>
                                                <button type="button" id="button" class="button_container" onclick="chgCalendar();" style="margin-left: 0px;">
                                                    <span class="button_inner">조회</span>
                                                </button>
                                            </div>
                                        </div>
                                        <!-- <div id="channelHistory" style="display: none;"> -->
                                        <div id="channelHistory" style="display: block;">
                                            <h3 id="channelInfo"></h3>
                                            <ul id="channelInfoYear"></ul>
                                            <canvas id="monthlyChart" height="100px"></canvas>
                                        </div>
                                        <!-- <div id="channelHistoryCalendar" style="display: block;"> -->
                                        <div id="channelHistoryCalendar" style="display: none;">
                                            <ul>
                                                <li>
                                                    <div class="calendar_header">
                                                        <button class="button_container_fit" onclick="goPrev();"><h2><</h2></button>
                                                        <h2 class="calendarDate">0000년 0월</h2>
                                                        <button class="button_container_fit" onclick="goNext();"><h2>></h2></button>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div class="calendar_container">
                                                        <div class="days">
                                                            <div class="day"><h4>SUN</h4></div>
                                                            <div class="day"><h4>MON</h4></div>
                                                            <div class="day"><h4>TUE</h4></div>
                                                            <div class="day"><h4>WED</h4></div>
                                                            <div class="day"><h4>THU</h4></div>
                                                            <div class="day"><h4>FRI</h4></div>
                                                            <div class="day"><h4>SAT</h4></div>
                                                        </div>
                                                        <div class="dates"></div>
                                                    </div>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>
    
    <!-- chart cdn -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js">
        import { Colors } from "chart.js";

        document.addEventListener("DOMContentLoaded", function() {
            Chart.register(Colors);
        });
    </script>
    <script src="./js/ChzzkCheeseHistory.js"></script>
</body>
</html>